{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar _jsxFileName = \"C:\\\\Users\\\\shohrat.garadaghli\\\\Desktop\\\\dev\\\\orderApp\\\\src\\\\screens\\\\Edit\\\\EditCategories\\\\EditSingleCategory\\\\EditSingleCategoryScreen.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport { connect } from 'react-redux';\nimport App from \"../../../../API/firebaseConfig\";\nimport HeaderBtnSave from \"../../../../components/HeaderBtnSave/HeaderBtnSave\";\nimport ImageEditOverlay from \"../../../../components/ImageEditOverlay/ImageEditOverlay\";\nimport PhotoPickModal from \"../../../../components/PhotoPickModal/PhotoPickModal\";\nimport CustomeTextInput from \"../../../../components/TextInput/CustomTextInput\";\nimport { categories } from \"../../../../data/dataArrays\";\nimport { updateCategory } from \"../../../../store/shop/categories\";\nvar SAVE_BTN_OFF = 0;\nvar SAVE_BTN_ON = 1;\nvar SAVE_BTN_LOADING = 2;\n\nfunction uploadToFirebase(uri, path) {\n  var blob, ref, downloadUrl;\n  return _regeneratorRuntime.async(function uploadToFirebase$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.t0 = _regeneratorRuntime;\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(fetch(uri));\n\n        case 3:\n          _context.t1 = _context.sent.blob();\n          _context.next = 6;\n          return _context.t0.awrap.call(_context.t0, _context.t1);\n\n        case 6:\n          blob = _context.sent;\n          ref = App.storage.ref().child(path);\n          _context.next = 10;\n          return _regeneratorRuntime.awrap(ref.put(blob));\n\n        case 10:\n          _context.next = 12;\n          return _regeneratorRuntime.awrap(ref.getDownloadURL());\n\n        case 12:\n          downloadUrl = _context.sent;\n          return _context.abrupt(\"return\", downloadUrl);\n\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\n\nvar EditSingleCategoryScreen = connect(null, {\n  updateCategory: updateCategory\n})(function (props) {\n  var category = props.route.params.item;\n  var navigation = props.navigation;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      photoModal = _useState2[0],\n      showPhotoModal = _useState2[1];\n\n  var _useState3 = useState(SAVE_BTN_OFF),\n      _useState4 = _slicedToArray(_useState3, 2),\n      saveBtnState = _useState4[0],\n      setSaveBtnState = _useState4[1];\n\n  var _useState5 = useState({\n    photo_url: category.photo_url,\n    name: category.name\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      properties = _useState6[0],\n      setProperties = _useState6[1];\n\n  var onSavePress = function onSavePress() {\n    var handlePhotoUpload, photo_url, dataToUpload;\n    return _regeneratorRuntime.async(function onSavePress$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            handlePhotoUpload = function _handlePhotoUpload(photoUrl) {\n              var ext, fileName, uploadUrl;\n              return _regeneratorRuntime.async(function handlePhotoUpload$(_context2) {\n                while (1) {\n                  switch (_context2.prev = _context2.next) {\n                    case 0:\n                      if (!(photoUrl.substr(0, 7) === 'file://')) {\n                        _context2.next = 15;\n                        break;\n                      }\n\n                      _context2.prev = 1;\n                      ext = photoUrl.split('.').pop();\n                      fileName = Date.now();\n                      _context2.next = 6;\n                      return _regeneratorRuntime.awrap(uploadToFirebase(photoUrl, \"categories/\" + category.id + \"/\" + fileName + '.' + ext));\n\n                    case 6:\n                      uploadUrl = _context2.sent;\n                      return _context2.abrupt(\"return\", uploadUrl);\n\n                    case 10:\n                      _context2.prev = 10;\n                      _context2.t0 = _context2[\"catch\"](1);\n                      console.log(_context2.t0.message, '\\nFailed to upload photo at', photoUrl);\n\n                    case 13:\n                      _context2.next = 16;\n                      break;\n\n                    case 15:\n                      return _context2.abrupt(\"return\", photoUrl);\n\n                    case 16:\n                    case \"end\":\n                      return _context2.stop();\n                  }\n                }\n              }, null, null, [[1, 10]], Promise);\n            };\n\n            setSaveBtnState(SAVE_BTN_LOADING);\n            _context3.next = 4;\n            return _regeneratorRuntime.awrap(handlePhotoUpload(properties.photo_url));\n\n          case 4:\n            photo_url = _context3.sent;\n            dataToUpload = {\n              id: category.id,\n              photo_url: photo_url,\n              name: properties.name\n            };\n            _context3.next = 8;\n            return _regeneratorRuntime.awrap(props.updateCategory(dataToUpload));\n\n          case 8:\n            setSaveBtnState(SAVE_BTN_OFF);\n\n          case 9:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var changeStateHandler = function changeStateHandler(field, value) {\n    setSaveBtnState(SAVE_BTN_ON);\n    setProperties(function (prevState) {\n      return _objectSpread(_objectSpread({}, prevState), {}, _defineProperty({}, field, value));\n    });\n  };\n\n  useEffect(function () {\n    navigation.setOptions({\n      headerRight: function headerRight() {\n        return React.createElement(HeaderBtnSave, {\n          loading: saveBtnState === SAVE_BTN_LOADING,\n          disabled: saveBtnState !== SAVE_BTN_ON,\n          onPress: function onPress() {\n            return onSavePress();\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 17\n          }\n        });\n      },\n      title: category.name + \" - Edit\"\n    });\n  }, [saveBtnState, properties]);\n  return React.createElement(View, {\n    style: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, photoModal && React.createElement(PhotoPickModal, {\n    ratio: [2, 1],\n    mode: 'changePhoto',\n    changeUrl: function changeUrl(url) {\n      return changeStateHandler('photo_url', url);\n    },\n    unmountModal: function unmountModal() {\n      return showPhotoModal(false);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 31\n    }\n  }), React.createElement(ScrollView, {\n    contentContainerStyle: {\n      alignItems: 'center'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }, React.createElement(View, {\n    style: styles.photoContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }, React.createElement(ImageEditOverlay, {\n    photosize: {\n      width: Dimensions.get('window').width,\n      height: Dimensions.get('window').width / 2\n    },\n    closeSign: false,\n    source: {\n      uri: \"\" + properties.photo_url\n    },\n    onPress: function onPress() {\n      return showPhotoModal(true);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 21\n    }\n  })), React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  }, React.createElement(CustomeTextInput, {\n    style: styles.categoryTitle,\n    value: properties.name,\n    onChangeText: function onChangeText(text) {\n      return changeStateHandler('name', text);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 21\n    }\n  }))));\n});\nexport default EditSingleCategoryScreen;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  categoryTitle: {\n    fontSize: 30,\n    fontWeight: 'bold',\n    marginTop: 50,\n    padding: 10,\n    width: 300,\n    textAlign: 'center'\n  }\n});","map":{"version":3,"sources":["C:/Users/shohrat.garadaghli/Desktop/dev/orderApp/src/screens/Edit/EditCategories/EditSingleCategory/EditSingleCategoryScreen.js"],"names":["React","useEffect","useState","connect","App","HeaderBtnSave","ImageEditOverlay","PhotoPickModal","CustomeTextInput","categories","updateCategory","SAVE_BTN_OFF","SAVE_BTN_ON","SAVE_BTN_LOADING","uploadToFirebase","uri","path","fetch","blob","ref","storage","child","put","getDownloadURL","downloadUrl","EditSingleCategoryScreen","props","category","route","params","item","navigation","photoModal","showPhotoModal","saveBtnState","setSaveBtnState","photo_url","name","properties","setProperties","onSavePress","handlePhotoUpload","photoUrl","substr","ext","split","pop","fileName","Date","now","id","uploadUrl","console","log","message","dataToUpload","changeStateHandler","field","value","prevState","setOptions","headerRight","title","styles","container","url","alignItems","photoContainer","width","Dimensions","get","height","categoryTitle","text","StyleSheet","create","flex","fontSize","fontWeight","marginTop","padding","textAlign"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport {View, Image, Text, StyleSheet, TextInput,ScrollView, Alert, Dimensions} from 'react-native';\r\nimport { connect } from 'react-redux';\r\nimport App from '../../../../API/firebaseConfig';\r\nimport HeaderBtnSave from '../../../../components/HeaderBtnSave/HeaderBtnSave';\r\nimport ImageEditOverlay from '../../../../components/ImageEditOverlay/ImageEditOverlay';\r\nimport PhotoPickModal from '../../../../components/PhotoPickModal/PhotoPickModal';\r\nimport CustomeTextInput from '../../../../components/TextInput/CustomTextInput';\r\nimport { categories } from '../../../../data/dataArrays';\r\nimport { updateCategory } from '../../../../store/shop/categories';\r\n\r\n\r\n\r\nconst SAVE_BTN_OFF = 0;\r\nconst SAVE_BTN_ON = 1;\r\nconst SAVE_BTN_LOADING = 2;\r\n\r\nasync function uploadToFirebase(uri, path){\r\n    // try{    // commented try block, as error is handled outside\r\n        let blob = await (await fetch(uri)).blob()\r\n        let ref = App.storage.ref().child(path)\r\n        await ref.put(blob)\r\n        const downloadUrl = await ref.getDownloadURL()\r\n        return downloadUrl;\r\n    // } catch(e){\r\n    //     console.warn(e)\r\n    //     return false\r\n    // }\r\n}\r\n\r\nconst EditSingleCategoryScreen=connect(null, {updateCategory})((props)=>{\r\n    const category=props.route.params.item;\r\n    const {navigation}=props;\r\n    const [photoModal, showPhotoModal]=useState(false);\r\n    const [saveBtnState, setSaveBtnState] = useState(SAVE_BTN_OFF);\r\n    const [properties,setProperties]=useState({\r\n        photo_url:category.photo_url,\r\n        name:category.name\r\n    });\r\n    \r\n    //on save press\r\n    const onSavePress = async() => {\r\n        setSaveBtnState(SAVE_BTN_LOADING);\r\n\r\n        async function handlePhotoUpload(photoUrl){\r\n            if(photoUrl.substr(0, 7) === 'file://') {\r\n                try {\r\n                    \r\n                    let ext = photoUrl.split('.').pop()\r\n\r\n                    let fileName = Date.now();\r\n                    let uploadUrl = await uploadToFirebase(photoUrl, /*`products/${product.id}/${fileName}${ext}`*/`categories/${category.id}/`+fileName+'.'+ext)\r\n                    return uploadUrl;\r\n                } catch (e) {\r\n                    console.log(e.message, '\\nFailed to upload photo at', photoUrl)\r\n                }\r\n            } else return photoUrl\r\n        }\r\n        let photo_url = await handlePhotoUpload(properties.photo_url);\r\n\r\n        let dataToUpload = {\r\n            id:category.id,\r\n            photo_url,\r\n            name:properties.name\r\n        };\r\n\r\n        await props.updateCategory(dataToUpload)\r\n        setSaveBtnState(SAVE_BTN_OFF);\r\n    }\r\n\r\n    const changeStateHandler=(field,value)=>{\r\n        setSaveBtnState(SAVE_BTN_ON);\r\n        setProperties(prevState=>({\r\n            ...prevState,\r\n            [field]:value\r\n        }));\r\n    }\r\n\r\n    useEffect(() => {\r\n        navigation.setOptions({\r\n            headerRight: () =>\r\n                <HeaderBtnSave\r\n                    loading={saveBtnState===SAVE_BTN_LOADING}\r\n                    disabled={saveBtnState!==SAVE_BTN_ON}\r\n                    onPress={() => onSavePress()}\r\n                />,\r\n            title:`${category.name} - Edit`\r\n            \r\n        })\r\n    }, [saveBtnState, properties])\r\n\r\n\r\n    return (\r\n        <View style={styles.container}>\r\n            {\r\n                photoModal && <PhotoPickModal \r\n                ratio={[2,1]}\r\n                mode={'changePhoto'} \r\n                changeUrl={(url)=>changeStateHandler('photo_url',url)} \r\n                unmountModal={()=>showPhotoModal(false)}\r\n                />\r\n            }\r\n            <ScrollView contentContainerStyle={{alignItems:'center'}}>\r\n                <View style={styles.photoContainer}>\r\n                    <ImageEditOverlay \r\n                    photosize={{width:Dimensions.get('window').width, height:Dimensions.get('window').width/2}} \r\n                    closeSign={false} \r\n                    source={{uri:`${properties.photo_url}`}} \r\n                    onPress={()=>showPhotoModal(true)} \r\n                    />\r\n                </View>\r\n                <View >\r\n                    <CustomeTextInput style={styles.categoryTitle} value={properties.name} onChangeText={(text)=>changeStateHandler('name',text)}/>\r\n                </View>\r\n            </ScrollView>\r\n\r\n        </View>\r\n    )\r\n})\r\nexport default EditSingleCategoryScreen\r\n\r\n\r\nconst styles=StyleSheet.create({\r\n    container:{\r\n        flex:1,\r\n    },\r\n    categoryTitle:{\r\n        fontSize:30,\r\n        fontWeight:'bold',\r\n        marginTop:50,\r\n        padding:10,\r\n        width:300,\r\n        textAlign:'center',\r\n    }\r\n})"]},"metadata":{},"sourceType":"module"}