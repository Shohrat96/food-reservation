{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport App from \"../../API/firebaseConfig\";\nimport { convertObToArr } from \"../../data/MockDataAPI\";\nvar SET_PRODUCTS = 'SET_PRODUCTS';\nvar UPDATE_PRODUCT = 'UPDATE_PRODUCT';\nexport var MODULE_NAME = \"products\";\nexport var selectProducts = function selectProducts(state) {\n  return state[MODULE_NAME];\n};\nvar initialState = [{\n  categoryId: 3,\n  ingredients: [['yağ', '200ml'], ['yağ', '5g'], ['yağ', '300g']],\n  photo_url: 'https://www.texanerin.com/content/uploads/2019/06/nobake-chocolate-cookies-1-650x975.jpg',\n  photosArray: ['https://www.texanerin.com/content/uploads/2019/06/nobake-chocolate-cookies-1-650x975.jpg', 'https://namelymarly.com/wp-content/uploads/2018/04/20180415_Beet_Lasagna_10.jpg', 'https://advancelocal-adapter-image-uploads.s3.amazonaws.com/image.al.com/home/bama-media/width600/img/news_impact/photo/burger-fijpg-57e7e5907630c2ad.jpg', 'https://img.thedailybeast.com/image/upload/c_crop,d_placeholder_euli9k,h_1439,w_2560,x_0,y_0/dpr_1.5/c_limit,w_1044/fl_lossy,q_auto/v1492718105/articles/2013/09/24/burger-king-s-new-french-fries-took-ten-years-to-develop/130923-gross-burger-tease_izz59e', 'https://aht.seriouseats.com/images/2012/02/20120221-193971-fast-food-fries-Burger-King-fries-2.jpg'],\n  recipeId: 122,\n  time: '15',\n  title: 'Oatmeal Cookies'\n}];\n\nfunction reducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n\n  var _ref = arguments.length > 1 ? arguments[1] : undefined,\n      type = _ref.type,\n      payload = _ref.payload;\n\n  switch (type) {\n    case SET_PRODUCTS:\n      return payload;\n\n    case UPDATE_PRODUCT:\n      var newState = _objectSpread({}, state);\n\n      newState[payload.id] = payload;\n      return newState;\n\n    default:\n      return state;\n  }\n}\n\nexport default reducer;\nexport var setData = function setData() {\n  return function _callee(dispatch) {\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            console.log('inside sign method');\n\n            try {\n              fetch('https://restaurant-reservation-33a36.firebaseio.com/products.json', {\n                method: 'GET',\n                headers: {\n                  Accept: 'application/json',\n                  'Content-Type': 'application/json'\n                }\n              }).then(function (resp) {\n                return resp.json();\n              }).then(function (data) {\n                dispatch({\n                  type: 'SET_PRODUCTS',\n                  payload: data\n                });\n              });\n            } catch (error) {\n              Alert.alert(error.message);\n            }\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n};\nexport var updateData = function updateData(dispatch, product) {\n  return _regeneratorRuntime.async(function updateData$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          console.log('inside update method', product);\n          _context2.prev = 1;\n          _context2.next = 4;\n          return _regeneratorRuntime.awrap(App.db.ref('products').child(product.id).update(product));\n\n        case 4:\n          dispatch({\n            type: UPDATE_PRODUCT,\n            payload: product\n          });\n          _context2.next = 11;\n          break;\n\n        case 7:\n          _context2.prev = 7;\n          _context2.t0 = _context2[\"catch\"](1);\n          console.log('error: ', _context2.t0);\n          Alert.alert(_context2.t0.message);\n\n        case 11:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, [[1, 7]], Promise);\n};","map":{"version":3,"sources":["C:/Users/shohrat.garadaghli/Desktop/dev/orderApp/src/store/shop/products.js"],"names":["App","convertObToArr","SET_PRODUCTS","UPDATE_PRODUCT","MODULE_NAME","selectProducts","state","initialState","categoryId","ingredients","photo_url","photosArray","recipeId","time","title","reducer","type","payload","newState","id","setData","dispatch","console","log","fetch","method","headers","Accept","then","resp","json","data","error","Alert","alert","message","updateData","product","db","ref","child","update"],"mappings":"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","sourcesContent":["import { Alert } from \"react-native\";\r\nimport App from \"../../API/firebaseConfig\";\r\nimport { convertObToArr } from \"../../data/MockDataAPI\";\r\n\r\n// ACTION TYPES\r\nconst SET_PRODUCTS='SET_PRODUCTS'\r\nconst UPDATE_PRODUCT='UPDATE_PRODUCT'\r\n\r\n// SELECTORS\r\nexport const MODULE_NAME = \"products\";\r\nexport const selectProducts = (state) => state[MODULE_NAME];\r\n\r\nconst initialState=[\r\n    {\r\n      categoryId: 3,\r\n      ingredients: [\r\n        [\r\n          'yağ',\r\n          '200ml'\r\n        ],\r\n        [\r\n          'yağ',\r\n          '5g'\r\n        ],\r\n        [\r\n          'yağ',\r\n          '300g'\r\n        ]\r\n      ],\r\n      photo_url: 'https://www.texanerin.com/content/uploads/2019/06/nobake-chocolate-cookies-1-650x975.jpg',\r\n      photosArray: [\r\n        'https://www.texanerin.com/content/uploads/2019/06/nobake-chocolate-cookies-1-650x975.jpg',\r\n        'https://namelymarly.com/wp-content/uploads/2018/04/20180415_Beet_Lasagna_10.jpg',\r\n        'https://advancelocal-adapter-image-uploads.s3.amazonaws.com/image.al.com/home/bama-media/width600/img/news_impact/photo/burger-fijpg-57e7e5907630c2ad.jpg',\r\n        'https://img.thedailybeast.com/image/upload/c_crop,d_placeholder_euli9k,h_1439,w_2560,x_0,y_0/dpr_1.5/c_limit,w_1044/fl_lossy,q_auto/v1492718105/articles/2013/09/24/burger-king-s-new-french-fries-took-ten-years-to-develop/130923-gross-burger-tease_izz59e',\r\n        'https://aht.seriouseats.com/images/2012/02/20120221-193971-fast-food-fries-Burger-King-fries-2.jpg'\r\n      ],\r\n      recipeId: 122,\r\n      time: '15',\r\n      title: 'Oatmeal Cookies'\r\n    }\r\n  ]\r\n\r\n    function reducer(state = initialState, { type, payload }) {\r\n    switch (type) {\r\n        case SET_PRODUCTS:\r\n          return payload\r\n        case UPDATE_PRODUCT:\r\n          let newState = {...state};\r\n          newState[payload.id] = payload;\r\n          return newState;\r\n          // return state\r\n        default:\r\n          return state\r\n    }\r\n  }\r\n\r\n  export default reducer\r\n  \r\n  //action creators\r\n  export const setData = () => async (\r\n    dispatch\r\n  ) => {\r\n      console.log('inside sign method');\r\n    try {\r\n      fetch('https://restaurant-reservation-33a36.firebaseio.com/products.json',\r\n      {\r\n        method: 'GET',\r\n        headers:{\r\n          Accept: 'application/json',\r\n          'Content-Type':'application/json'\r\n        }\r\n      }).then(resp=>resp.json()).then(data=>{\r\n        dispatch({type:'SET_PRODUCTS',payload: data});\r\n      })\r\n      \r\n    } catch (error) {\r\n      Alert.alert(error.message);\r\n    }\r\n  };\r\n\r\n  //UPDATE PRODUCT ACTION\r\n\r\nexport const updateData = async(dispatch, product) => {\r\n  console.log('inside update method',product) //) //\r\n  try {\r\n    await App.db.ref('products').child(product.id).update(product);\r\n    dispatch({type: UPDATE_PRODUCT, payload: product});\r\n    \r\n  } catch (error) {\r\n    console.log('error: ',error);\r\n    Alert.alert(error.message);\r\n  }\r\n};\r\n  // async (\r\n  //   dispatch\r\n  // ) => {\r\n  //     console.log('inside update method', product);\r\n  //   try {\r\n  //     fetch(`https://restaurant-reservation-33a36.firebaseio.com/products/${product}.json`,\r\n  //     {\r\n  //       method: 'UPDATE',\r\n  //       headers:{\r\n  //         Accept: 'application/json',\r\n  //         'Content-Type':'application/json'\r\n  //       }\r\n  //     }).then(resp=>resp.json()).then(data=>{\r\n  //       dispatch({type:'UPDATE_PRODUCT',payload: product});\r\n  //     })\r\n      \r\n  //   } catch (error) {\r\n  //     Alert.alert(error.message);\r\n  //   }\r\n  // };"]},"metadata":{},"sourceType":"module"}